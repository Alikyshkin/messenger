# =============================================================================
# Мессенджер — конфигурация
# Скопируйте в .env и заполните нужные значения:
#   cp .env.example .env
# =============================================================================


# -----------------------------------------------------------------------------
# Основное
# -----------------------------------------------------------------------------

# Порт HTTP-сервера
PORT=3000

# Окружение: development | production | test
NODE_ENV=development

# Уровень логирования: debug | info | warn | error
# По умолчанию: debug (dev) / info (prod)
# LOG_LEVEL=info

# Доверять заголовкам прокси (X-Forwarded-For и т.п.)
# Включить если сервер стоит за nginx / Caddy / load balancer
# TRUST_PROXY=true


# -----------------------------------------------------------------------------
# Безопасность
# -----------------------------------------------------------------------------

# Секрет для подписи JWT. В продакшне — длинная случайная строка.
# Сгенерировать: node -e "console.log(require('crypto').randomBytes(48).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-at-least-32-chars

# Ключ шифрования для старых сообщений (серверное шифрование до перехода на E2EE).
# Нужен только если такие сообщения есть в базе — иначе не трогать.
# ENCRYPTION_KEY=your-encryption-key-min-16-chars


# -----------------------------------------------------------------------------
# База данных (SQLite)
# -----------------------------------------------------------------------------

# Путь к файлу базы. По умолчанию: server/messenger.db
# В продакшне вынести в постоянный volume, чтобы не потерять при деплое.
# MESSENGER_DB_PATH=/opt/messenger/data/messenger.db


# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------

# Разрешённые origins через запятую.
# По умолчанию разрешены localhost:3000 и :8080 для разработки.
# CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com


# -----------------------------------------------------------------------------
# Email / SMTP (для сброса пароля)
# -----------------------------------------------------------------------------

# Если не задано — ссылка сброса пароля просто выводится в консоль сервера.

# Базовый URL приложения (подставляется в ссылку в письме)
# APP_BASE_URL=https://your-domain.com

# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@example.com
# SMTP_PASS=your-smtp-password
# MAIL_FROM=noreply@example.com


# -----------------------------------------------------------------------------
# OAuth: Google
# -----------------------------------------------------------------------------
# Создать Client ID: console.cloud.google.com
#   APIs & Services → Credentials → Create → OAuth 2.0 Client ID (Web application)
#   Authorized JavaScript origins: http://localhost:8765, https://your-domain.com

# GOOGLE_CLIENT_ID=123456789-abc.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=GOCSPX-xxx


# -----------------------------------------------------------------------------
# OAuth: VK
# -----------------------------------------------------------------------------
# Создать приложение: vk.com/apps?act=manage

# VK_APP_ID=12345678
# VK_CLIENT_SECRET=your-vk-client-secret


# -----------------------------------------------------------------------------
# OAuth: Telegram
# -----------------------------------------------------------------------------
# Создать бота: @BotFather в Telegram

# TELEGRAM_BOT_TOKEN=123456789:ABCDefGhIJKlmNoPQRsTUVwxyZ


# -----------------------------------------------------------------------------
# Вход по номеру телефона (SMS)
# -----------------------------------------------------------------------------
# Dev-режим (бесплатно): SMS_PROVIDER=twilio без Twilio-credentials —
#   код выводится в консоль сервера, SMS не отправляется.

# SMS_PROVIDER=twilio
# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_AUTH_TOKEN=your-twilio-auth-token
# TWILIO_FROM_NUMBER=+1234567890


# -----------------------------------------------------------------------------
# Push-уведомления (Firebase Cloud Messaging)
# -----------------------------------------------------------------------------
# Создать проект: console.firebase.google.com
#   Project Settings → Service accounts → Generate new private key

# Путь к JSON-файлу сервисного аккаунта:
# FCM_SERVICE_ACCOUNT_PATH=/path/to/firebase-service-account.json

# Или передать JSON-строку напрямую (удобно для Docker / CI):
# FCM_SERVICE_ACCOUNT_JSON={"type":"service_account","project_id":"..."}


# -----------------------------------------------------------------------------
# Кэш (Redis)
# -----------------------------------------------------------------------------
# Если не задан — кэширование отключено, сервер работает без Redis.

# REDIS_URL=redis://localhost:6379


# -----------------------------------------------------------------------------
# Хранение данных (автоочистка)
# -----------------------------------------------------------------------------

# MESSAGE_RETENTION_DAYS=365
# AUDIT_LOG_RETENTION_DAYS=90
# RESET_TOKEN_RETENTION_DAYS=7
# READ_RECEIPT_RETENTION_DAYS=180


# -----------------------------------------------------------------------------
# Версия клиента
# -----------------------------------------------------------------------------
# Отдаётся через GET /api/version. По умолчанию берётся из package.json.
# CLIENT_VERSION=1.0.0
